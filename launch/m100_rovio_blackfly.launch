<?xml version="1.0" encoding="UTF-8"?> 
<launch>

  <arg name="use_sim_time"                    default="false"/>
  <arg name="filter_config_file"              default="$(find rovio)/cfg/alpha_blackfly/alpha_blackfly.info"/>
  <arg name="imu_topic"/>
  <arg name="camera_topic"/>
  <arg name="camera_config_file"          />
  <arg name="camera_time_offset" default="0.0"         />
  <arg name="resize_input_image"              default="false"/>
  <arg name="resize_factor"                   default="1.0"/>
  <arg name="histogram_equalize_8bit_images"  default="false"/>
  <arg name="clahe_clip_limit"                default="2"/>
  <arg name="clahe_grid_size"                 default="6"/>

  <!-- use_sim_time -->
  <param name ="/use_sim_time" value="$(arg use_sim_time)"/>
  
  <node pkg="rovio" type="rovio_node" name="rovio" output="screen" clear_params="true">
    <param name="filter_config" value="$(arg filter_config_file)"/>
    <remap from="imu0" to="$(arg imu_topic)"/>
    <param name="camera0_config" value="$(arg camera_config_file)"/>
    <remap from="cam0/image_raw" to="$(arg camera_topic)"/>
    <param name="cam0_offset" value="$(arg camera_time_offset)"/> # blackfly: timeshift[s](t_imu = t_cam + shift) 0.01215371276812396 
    <param name="resize_input_image" value="$(arg resize_input_image)"/>         # resize input image by resize_factor - CAMERA INTRINSICS NOT SCALED CORRECT CALIBRATION FILE MANUALLY
    <param name="resize_factor" value="$(arg resize_factor)"/>               # (img.cols x resize_factor) X (img.rows x resize_factor)
    <param name="histogram_equalize_8bit_images" value="$(arg histogram_equalize_8bit_images)"/>
    <param name="clahe_clip_limit" value="$(arg clahe_clip_limit)"/>
    <param name="clahe_grid_size" value="$(arg clahe_grid_size)"/>
  </node>

</launch>